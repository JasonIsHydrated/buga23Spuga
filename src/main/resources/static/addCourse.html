<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add a Course</title>
    <script type="text/javascript">
        function select()
        {
            var1=document.getElementById("radio1");
            if(var1.checked==true)
            {
                document.myform.action="http://localhost:8080/course/add/includingOffer";
            }
            else
            {
                document.myform.action="http://localhost:8080/course/add";
            }
        }
        for(var i= 0; i < 2; i++) {
            var http = null;
            http = new XMLHttpRequest();
            if (http != null) {
                http.open("GET", "http://localhost:8080/location/all", true);
                http.setRequestHeader("Accept", "application/json");
                http.onreadystatechange = ausgebenLoc;
                http.send(null);
            }
            function ausgebenLoc() {
                if (http.readyState == 4) {
                    var daten = http.responseText;
                    daten = eval("(" + daten + ")");
                    var menu = document.querySelector("#location-names");
                    for (var i = 0; i < daten.length; i++) {
                        var location = daten[i];
                        var option = document.createElement("option");
                        option.text = location.name;
                        option.value = location.id;
                        menu.appendChild(option);
                    }

                }
            }
            var http2 = null;
            http2 = new XMLHttpRequest();
            if(http2 != null) {
                http2.open("GET", "http://localhost:8080/category/all", true);
                http2.setRequestHeader("Accept", "application/json");
                http2.onreadystatechange = ausgebenCat;
                http2.send(null);

            }
            function ausgebenCat() {
                if(http2.readyState == 4) {
                    var daten = http2.responseText;
                    daten = eval("("+daten+")");
                    var menu = document.querySelector("#category-names");
                    for(var i = 0; i < daten.length; i++) {
                        var category = daten[i];
                        var checkbox = document.createElement("input");
                        checkbox.setAttribute('type', 'checkbox');
                        checkbox.name = ""+category.name;
                        checkbox.id = ""+category.name + i;
                        checkbox.value = category.name;
                        var label = document.createElement("label");
                        label.htmlFor = ""+category.name+i;
                        label.appendChild(document.createTextNode(category.name + "  "));
                        menu.appendChild(checkbox);
                        menu.appendChild(label);
                    }
                }
            }
        }


    </script>
</head>
<body>
<form action="http://localhost:8080/course/add" name="myform" onsubmit="select()">
    <br>
    Kursname: <input name="coursename"><br>
    <br>
    <label for="category-names">Kategorien:</label>
    <div name="catName" id="category-names"></div>
    <br>
    <fieldset>
        <legend>Direkt ein Angebot erstellen::</legend>
        <div>
            <input type="radio" id="radio1" name="offerRadio" value="includeOffer" />
            <label for="radio1">Ja</label>

            <input type="radio" id="radio2" name="offerRadio" value="excludeOffer" />
            <label for="radio2">Nein</label>

        </div>
        <label for="location-names">Veranstaltungsort:</label>
        <select name="locID" id="location-names"> </select>
        <br>
        <label for="date">Datum:</label>
        <input type="date" id="date" name="date"
               value="2023-06-22"
               min="2023-01-01" max="2023-12-31">
        <br>
        <label for="time">Uhrzeit:</label>

        <input type="time" id="time" name="time"
               value="12:00"
               min="09:00" max="18:00" required>

    </fieldset>
    <br>
    <button formmethod="post">Kurs speichern</button>
</form>
</body>
</html>